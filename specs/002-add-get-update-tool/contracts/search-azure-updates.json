{
    "name": "search_azure_updates",
    "description": "Search and filter Azure service updates. Returns lightweight results with metadata only (no descriptions). Supports natural language queries with keyword matching and multi-dimensional filtering (tags, categories, products, dates). Use get_azure_update to retrieve full details including descriptions for specific updates.",
    "inputSchema": {
        "type": "object",
        "properties": {
            "query": {
                "type": "string",
                "description": "Natural language search query or keywords to match in title and description. Uses full-text search with BM25 relevance ranking. Leave empty to filter only without keyword search."
            },
            "filters": {
                "type": "object",
                "description": "Structured filters to narrow down search results. All filters use AND logic.",
                "properties": {
                    "tags": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Filter by update tags (e.g., ['Retirements', 'Security'])"
                    },
                    "productCategories": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Filter by Azure product categories (e.g., ['Compute', 'AI + Machine Learning'])"
                    },
                    "products": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "Filter by specific Azure products (e.g., ['Azure Virtual Machines'])"
                    },
                    "status": {
                        "type": "string",
                        "description": "Filter by update status (e.g., 'Active', 'Retired')"
                    },
                    "availabilityRing": {
                        "type": "string",
                        "enum": [
                            "General Availability",
                            "Preview",
                            "Private Preview",
                            "Retirement"
                        ],
                        "description": "Filter by availability ring"
                    },
                    "dateFrom": {
                        "type": "string",
                        "description": "ISO 8601 date - include updates modified/available on or after this date"
                    },
                    "dateTo": {
                        "type": "string",
                        "description": "ISO 8601 date - include updates modified/available on or before this date"
                    },
                    "retirementDateFrom": {
                        "type": "string",
                        "description": "ISO 8601 date - include updates with retirement date on or after this date (only applies to retirement updates)"
                    },
                    "retirementDateTo": {
                        "type": "string",
                        "description": "ISO 8601 date - include updates with retirement date on or before this date (only applies to retirement updates)"
                    }
                }
            },
            "sortBy": {
                "type": "string",
                "enum": [
                    "relevance",
                    "modified:desc",
                    "modified:asc",
                    "created:desc",
                    "created:asc",
                    "retirementDate:asc",
                    "retirementDate:desc"
                ],
                "description": "Sort order for results with direction suffix (:asc or :desc). 'relevance' (default for keyword queries, uses BM25 score, always descending), 'modified:desc' (most recently modified first), 'modified:asc' (oldest modified first), 'created:desc' (most recently created first), 'created:asc' (oldest created first), 'retirementDate:asc' (earliest retirement date first), 'retirementDate:desc' (latest retirement date first, only includes updates with Retirement ring). If not specified, defaults to 'relevance' for keyword searches and 'modified:desc' for filter-only searches."
            },
            "limit": {
                "type": "number",
                "description": "Maximum number of results to return (1-100, default: 50)",
                "minimum": 1,
                "maximum": 100
            },
            "offset": {
                "type": "number",
                "description": "Number of results to skip for pagination (default: 0)",
                "minimum": 0
            }
        }
    },
    "outputSchema": {
        "type": "object",
        "properties": {
            "results": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "type": "string",
                            "description": "Unique identifier"
                        },
                        "title": {
                            "type": "string",
                            "description": "Update title"
                        },
                        "status": {
                            "type": "string",
                            "nullable": true,
                            "description": "Update status"
                        },
                        "tags": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "description": "Update tags"
                        },
                        "productCategories": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "description": "Product categories"
                        },
                        "products": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "description": "Specific products"
                        },
                        "created": {
                            "type": "string",
                            "description": "ISO 8601 timestamp"
                        },
                        "modified": {
                            "type": "string",
                            "description": "ISO 8601 timestamp"
                        },
                        "availabilities": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "ring": {
                                        "type": "string"
                                    },
                                    "date": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "ring",
                                    "date"
                                ]
                            }
                        },
                        "relevanceScore": {
                            "type": "number",
                            "description": "BM25 relevance score (only present for keyword searches)"
                        }
                    },
                    "required": [
                        "id",
                        "title",
                        "created",
                        "modified",
                        "tags",
                        "productCategories",
                        "products",
                        "availabilities"
                    ]
                }
            },
            "metadata": {
                "type": "object",
                "properties": {
                    "total": {
                        "type": "number",
                        "description": "Total number of matching results"
                    },
                    "limit": {
                        "type": "number",
                        "description": "Results limit applied"
                    },
                    "offset": {
                        "type": "number",
                        "description": "Results offset applied"
                    },
                    "hasMore": {
                        "type": "boolean",
                        "description": "Whether more results are available"
                    },
                    "queryTime": {
                        "type": "number",
                        "description": "Query execution time in milliseconds"
                    }
                },
                "required": [
                    "total",
                    "limit",
                    "offset",
                    "hasMore",
                    "queryTime"
                ]
            }
        },
        "required": [
            "results",
            "metadata"
        ]
    },
    "examples": [
        {
            "name": "Search by tags and date",
            "input": {
                "filters": {
                    "tags": [
                        "Retirements"
                    ],
                    "productCategories": [
                        "Compute"
                    ],
                    "dateFrom": "2026-01-01"
                },
                "sortBy": "retirementDate:asc",
                "limit": 10
            },
            "output": {
                "results": [
                    {
                        "id": "AZ-abc123",
                        "title": "Retirement: Azure Virtual Machines Basic tier",
                        "status": "Active",
                        "tags": [
                            "Retirements"
                        ],
                        "productCategories": [
                            "Compute"
                        ],
                        "products": [
                            "Azure Virtual Machines"
                        ],
                        "created": "2025-01-15T10:00:00.000Z",
                        "modified": "2025-01-20T14:30:00.000Z",
                        "availabilities": [
                            {
                                "ring": "Retirement",
                                "date": "2026-03-31"
                            }
                        ]
                    }
                ],
                "metadata": {
                    "total": 45,
                    "limit": 10,
                    "offset": 0,
                    "hasMore": true,
                    "queryTime": 23
                }
            }
        },
        {
            "name": "Search retirements by retirement date range",
            "input": {
                "filters": {
                    "tags": [
                        "Retirements"
                    ],
                    "retirementDateFrom": "2026-01-01",
                    "retirementDateTo": "2026-12-31"
                },
                "sortBy": "retirementDate:asc",
                "limit": 20
            },
            "output": {
                "results": [
                    {
                        "id": "AZ-retire789",
                        "title": "Retirement: Azure Batch Service Management API",
                        "status": "Active",
                        "tags": [
                            "Retirements"
                        ],
                        "productCategories": [
                            "Compute"
                        ],
                        "products": [
                            "Azure Batch"
                        ],
                        "created": "2025-06-01T09:00:00.000Z",
                        "modified": "2025-06-15T11:00:00.000Z",
                        "availabilities": [
                            {
                                "ring": "Retirement",
                                "date": "2026-03-31"
                            }
                        ]
                    },
                    {
                        "id": "AZ-retire790",
                        "title": "Retirement: Classic Azure Storage accounts",
                        "status": "Active",
                        "tags": [
                            "Retirements"
                        ],
                        "productCategories": [
                            "Storage"
                        ],
                        "products": [
                            "Azure Storage"
                        ],
                        "created": "2025-05-10T14:00:00.000Z",
                        "modified": "2025-05-20T16:30:00.000Z",
                        "availabilities": [
                            {
                                "ring": "Retirement",
                                "date": "2026-08-31"
                            }
                        ]
                    }
                ],
                "metadata": {
                    "total": 23,
                    "limit": 20,
                    "offset": 0,
                    "hasMore": true,
                    "queryTime": 19
                }
            }
        },
        {
            "name": "Keyword search",
            "input": {
                "query": "OAuth authentication security",
                "limit": 5
            },
            "output": {
                "results": [
                    {
                        "id": "AZ-security456",
                        "title": "OAuth 2.0 authentication improvements",
                        "status": "Active",
                        "tags": [
                            "Security",
                            "Features"
                        ],
                        "productCategories": [
                            "Identity"
                        ],
                        "products": [
                            "Azure Active Directory"
                        ],
                        "created": "2025-02-01T08:00:00.000Z",
                        "modified": "2025-02-05T12:00:00.000Z",
                        "availabilities": [
                            {
                                "ring": "General Availability",
                                "date": "2025-03-01"
                            }
                        ],
                        "relevanceScore": 0.89
                    }
                ],
                "metadata": {
                    "total": 12,
                    "limit": 5,
                    "offset": 0,
                    "hasMore": true,
                    "queryTime": 18
                }
            }
        }
    ],
    "errors": [
        {
            "error": "Validation failed",
            "details": [
                "limit must be between 1 and 100"
            ]
        },
        {
            "error": "Search failed",
            "details": "An unexpected error occurred while processing your search."
        }
    ],
    "notes": [
        "This tool returns lightweight results WITHOUT description fields to reduce token usage.",
        "Use get_azure_update with the returned ID to retrieve full details including descriptions.",
        "The 'id' parameter has been removed from this tool. Use get_azure_update instead for ID-based retrieval.",
        "Sort options use explicit direction suffixes: ':asc' for ascending, ':desc' for descending. Default is 'relevance' for keyword queries and 'modified:desc' for filter-only queries.",
        "The 'retirementDate' sort options only include updates with a Retirement ring availability. Use ':asc' for earliest retirement first, ':desc' for latest retirement first.",
        "The 'retirementDateFrom' and 'retirementDateTo' filters apply specifically to the retirement date found in the availabilities array where ring='Retirement'."
    ]
}
